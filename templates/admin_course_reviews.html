{% extends 'base.html' %}
{% block content %}
<section>
  <h1 class="page-title">Course Reviews Management</h1>
  <a href="{{ url_for('admin_panel') }}" class="btn-back">‚Üê Back to Admin Panel</a>
  
  <div class="card" style="margin-top: 2rem;">
    <h3>All Course Reviews ({{ reviews|length }})</h3>
    
    {% if reviews %}
    <table class="admin-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Username</th>
          <th>Roll No</th>
          <th>Year</th>
          <th>Course</th>
          <th>Review</th>
          <th>Date</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for review in reviews %}
        <tr>
          <td>{{ review['id'] }}</td>
          <td>{{ review['username'] or 'N/A' }}</td>
          <td>{{ review['roll_no'] }}</td>
          <td>{{ review['current_year'] }}</td>
          <td><strong>{{ review['course'] }}</strong></td>
          <td class="review-text">{{ review['review_text'][:100] }}{% if review['review_text']|length > 100 %}...{% endif %}</td>
          <td>{{ review['created_at'][:10] }}</td>
          <td>
            <form method="POST" action="{{ url_for('delete_course_review', review_id=review['id']) }}" style="display: inline;">
              <button type="submit" class="btn-delete" onclick="return confirm('Are you sure you want to delete this review?')">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% else %}
    <p style="text-align: center; color: #888; padding: 2rem;">No course reviews yet.</p>
    {% endif %}
  </div>
</section>

<style>
  .btn-back {
    display: inline-block;
    padding: 8px 16px;
    background-color: #f0f0f0;
    text-decoration: none;
    color: #333;
    border-radius: 4px;
    margin-bottom: 1rem;
  }
  .btn-back:hover {
    background-color: #e0e0e0;
  }
  .admin-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
  }
  .admin-table th,
  .admin-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  .admin-table th {
    background-color: #f5f5f5;
    font-weight: bold;
  }
  .admin-table tr:hover {
    background-color: #f9f9f9;
  }
  .review-text {
    max-width: 300px;
    word-wrap: break-word;
  }
  .btn-delete {
    padding: 6px 12px;
    background-color: #f44336;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  .btn-delete:hover {
    background-color: #d32f2f;
  }
</style>
{% endblock %}
